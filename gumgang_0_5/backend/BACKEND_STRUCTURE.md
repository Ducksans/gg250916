# ğŸ“š Backend Structure Documentation
**Last Updated**: 2025-01-09
**Status**: Cleaned and Simplified

## ğŸ¯ Current Main Entry Point

### PRIMARY: `simple_main.py`
- **Port**: 8000 (í†µì¼ë¨)
- **Purpose**: ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì„œë²„ (í˜„ì¬ ë©”ì¸ìœ¼ë¡œ ì‚¬ìš©)
- **Start Command**: `python3 simple_main.py`
- **Features**:
  - âœ… Health check endpoint
  - âœ… Protocol endpoints integration
  - âœ… AI Ask endpoint
  - âœ… Dashboard stats
  - âœ… Task management

### SECONDARY: `main.py`
- **Port**: 8000
- **Purpose**: í”„ë¡œë•ì…˜ ì„œë²„ (ë³µì¡í•œ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ í¬í•¨)
- **Start Command**: `uvicorn main:app --host 0.0.0.0 --port 8000`
- **Note**: í˜„ì¬ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ (ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™” í•„ìš”)

## ğŸ—‚ï¸ Backed Up Files (ë¶ˆí•„ìš”í•œ ì§„ì…ì )

ë‹¤ìŒ íŒŒì¼ë“¤ì€ `backup_entries_20250809/` ë””ë ‰í† ë¦¬ë¡œ ì´ë™ë¨:
- `app_new.py` - í…ŒìŠ¤íŠ¸ìš© ëŒ€ì²´ ì„œë²„
- `start_server.py` - ë³µì¡í•œ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
- `start_test_server.sh` - ì¤‘ë³µ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
- `backendserverstart.sh` - êµ¬ë²„ì „ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
- `app_new.log` - ë¡œê·¸ íŒŒì¼
- `backend_simple.log` - ë¡œê·¸ íŒŒì¼

## ğŸš€ ë°±ì—”ë“œ ì‹œì‘ ë°©ë²• (ê¶Œì¥)

### ë°©ë²• 1: ìë™ ì‹œì‘ (ê¶Œì¥) âœ¨
```bash
# ì´ë¯¸ .bashrc/.zshrcì— ì„¤ì •ë¨
# ìƒˆ í„°ë¯¸ë„ ì—´ë©´ ìë™ìœ¼ë¡œ ë°±ì—”ë“œ í™•ì¸ ë° ì‹œì‘

# ìˆ˜ë™ìœ¼ë¡œ ìƒíƒœ í™•ì¸
gumgang-status

# ìˆ˜ë™ìœ¼ë¡œ ì‹œì‘
gumgang-start
```

### ë°©ë²• 2: ì§ì ‘ ì‹¤í–‰
```bash
cd /home/duksan/ë°”íƒ•í™”ë©´/gumgang_0_5/backend
python3 simple_main.py
```

### ë°©ë²• 3: ìë™ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
```bash
cd /home/duksan/ë°”íƒ•í™”ë©´/gumgang_0_5
./auto_start_backend.sh start
```

## ğŸ”§ í¬íŠ¸ ì„¤ì •

### í˜„ì¬ í¬íŠ¸ êµ¬ì„±
- **Backend API**: `8000` (í†µì¼ë¨)
- **Terminal Server**: `8002` (ë³„ë„ ì„œë¹„ìŠ¤)
- **Frontend**: `3000` (Next.js dev server)

### í¬íŠ¸ ë³€ê²½ ì´ë ¥
- ì´ˆê¸°: 8000
- ì¤‘ê°„: 8001 (ì¶©ëŒ íšŒí”¼ìš©)
- í˜„ì¬: 8000 (ì›ë˜ëŒ€ë¡œ ë³µì›)

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
backend/
â”œâ”€â”€ simple_main.py         # â­ ë©”ì¸ ì§„ì…ì 
â”œâ”€â”€ main.py               # í”„ë¡œë•ì…˜ ì„œë²„ (ë¯¸ì‚¬ìš©)
â”œâ”€â”€ protocol_endpoints.py # Protocol API ë¼ìš°í„°
â”œâ”€â”€ health_route.py       # í—¬ìŠ¤ì²´í¬ ë¼ìš°í„°
â”œâ”€â”€ requirements.txt      # ì˜ì¡´ì„±
â”‚
â”œâ”€â”€ app/                  # ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ api/             # API ë¼ìš°í„°
â”‚   â”œâ”€â”€ core/            # í•µì‹¬ ì„¤ì •
â”‚   â””â”€â”€ services/        # ì„œë¹„ìŠ¤ ë ˆì´ì–´
â”‚
â”œâ”€â”€ memory/              # ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ (main.pyìš©)
â”œâ”€â”€ logs/                # ë¡œê·¸ íŒŒì¼
â”œâ”€â”€ venv/                # ê°€ìƒí™˜ê²½
â”‚
â””â”€â”€ backup_entries_20250809/  # ë°±ì—…ëœ ë¶ˆí•„ìš” íŒŒì¼ë“¤
    â”œâ”€â”€ app_new.py
    â”œâ”€â”€ start_server.py
    â””â”€â”€ ...
```

## ğŸ› ï¸ ê´€ë¦¬ ëª…ë ¹ì–´

### ê¸°ë³¸ ëª…ë ¹ì–´ (ë³„ì¹­ ì„¤ì •ë¨)
```bash
gumgang         # ë°±ì—”ë“œ ê´€ë¦¬ ë„êµ¬
gumgang-status  # ìƒíƒœ í™•ì¸
gumgang-start   # ì‹œì‘
gumgang-stop    # ì¤‘ì§€
gumgang-restart # ì¬ì‹œì‘
gumgang-logs    # ì‹¤ì‹œê°„ ë¡œê·¸
gumgang-errors  # ì—ëŸ¬ ë¡œê·¸
test-api        # API í—¬ìŠ¤ì²´í¬
```

### í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬
```bash
# ì‹¤í–‰ ì¤‘ì¸ ë°±ì—”ë“œ ì°¾ê¸°
ps aux | grep simple_main

# í¬íŠ¸ ì‚¬ìš© í™•ì¸
lsof -i:8000

# ê°•ì œ ì¢…ë£Œ (í•„ìš”ì‹œ)
pkill -f simple_main.py
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ë‹¨ì¼ ì§„ì…ì  ì‚¬ìš©**: `simple_main.py`ë§Œ ì‚¬ìš©
2. **í¬íŠ¸ ì¶©ëŒ ë°©ì§€**: 8000 í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë©´ ìë™ ì •ë¦¬
3. **ìë™ ì‹œì‘ í™œì„±í™”**: ìƒˆ ì„¸ì…˜ì—ì„œ ìë™ìœ¼ë¡œ ë°±ì—”ë“œ ì‹œì‘
4. **ë¡œê·¸ í™•ì¸**: ë¬¸ì œ ë°œìƒì‹œ `backend/logs/` í™•ì¸

## ğŸ”„ ì„¸ì…˜ ì—°ì†ì„±

ì¬ë¶€íŒ…ì´ë‚˜ ì„¸ì…˜ ì¢…ë£Œ í›„:
1. ìƒˆ í„°ë¯¸ë„ ì—´ê¸° â†’ ìë™ìœ¼ë¡œ ë°±ì—”ë“œ ì‹œì‘
2. Cron jobì´ 5ë¶„ë§ˆë‹¤ í—¬ìŠ¤ì²´í¬
3. ë‹¤ìš´ ê°ì§€ì‹œ ìë™ ì¬ì‹œì‘

## ğŸ“Š í˜„ì¬ ìƒíƒœ ìš”ì•½

| í•­ëª© | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| ë©”ì¸ ì„œë²„ | `simple_main.py` | í¬íŠ¸ 8000 |
| ë°±ì—… íŒŒì¼ | ê²©ë¦¬ ì™„ë£Œ | `backup_entries_20250809/` |
| ìë™ ì‹œì‘ | ì„¤ì • ì™„ë£Œ | `.bashrc/.zshrc` |
| ëª¨ë‹ˆí„°ë§ | í™œì„±í™” | Cron 5ë¶„ë§ˆë‹¤ |
| í¬íŠ¸ í†µì¼ | ì™„ë£Œ | 8000ìœ¼ë¡œ í†µì¼ |

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

1. âœ… ë¶ˆí•„ìš”í•œ ì§„ì…ì  ë°±ì—… ì™„ë£Œ
2. âœ… í¬íŠ¸ 8000ìœ¼ë¡œ í†µì¼ ì™„ë£Œ
3. âœ… ìë™ ì‹œì‘ ì‹œìŠ¤í…œ êµ¬ì¶• ì™„ë£Œ
4. â³ ì¶”í›„: `main.py`ì™€ í†µí•© ê³ ë ¤

---

**ë¬¸ì œ ë°œìƒì‹œ**: `gumgang-logs` ë˜ëŠ” `gumgang-errors` ëª…ë ¹ì–´ë¡œ ë¡œê·¸ í™•ì¸