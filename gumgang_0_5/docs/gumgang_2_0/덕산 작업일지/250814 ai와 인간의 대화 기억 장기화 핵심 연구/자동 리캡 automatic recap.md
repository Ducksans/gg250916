자동 리캡(Automatic Recap)은  
세션이 끊기거나 사용자가 모호하게 “아까”·“그때” 같은 말을 했을 때, **AI가 스스로 직전 맥락을 요약해서 다시 꺼내 보여주는 기능**을 말합니다.

---

## 🔍 쉽게 비유

- 회의에서 잠시 나갔다 돌아온 사람에게, 회의록을 보고 있던 비서가  
    **“방금 전까지 ○○ 얘기하고 있었어요. 여기서 계속할까요?”** 라고 말해주는 것과 같아요.
    

---

## ⚙️ 동작 원리

1. **마지막 컨텍스트 캡처**
    
    - AI가 매 턴마다 **CB(컨텍스트 버퍼)**에 최종 맥락을 저장.
        
    - 맥락에는: 주제, 마지막 작업 상태, 직전 질문·응답, 진행 단계.
        
2. **세션 복귀 감지**
    
    - 사용자의 첫 입력이 모호하거나 범용적인 경우 (`"아까 뭐했지?"`, `"어디까지 했더라?"`) → 트리거 발동.
        
3. **RAG로 최근 맥락 검색**
    
    - 타임스탬프 기반(`as_of: 최근 10~30분`)으로 가장 관련도 높은 기록 검색.
        
4. **자동 요약 생성**
    
    - 짧고 핵심만 추린 요약(1~3줄) 작성.
        
    - 예: `"마지막으로 금강 회의 테이블 API Mock까지 마쳤고, UI 목업 준비 단계에 있었어요."`
        
5. **확인 및 선택 유도**
    
    - `"여기서 계속할까요, 아니면 이전 단계로 돌아갈까요?"` 같이 선택지를 제공.
        

---

## 🛠 구현 요소

- **CB 저장 로직**: 모든 턴의 핵심만 압축해 CB에 유지.
    
- **트리거 감지기**: “아까, 그때, 전에, 어디까지” 같은 [[키워드 NLP 필터]]
    
- **RAG 검색기**: 최근 타임프레임(단기 메모리)에서 컨텍스트 조회.
    
- **요약기(Summarizer)**: 필요 시 LLM을 호출해 자동 요약 생성.
    
- **재투입 핸들러**: 사용자가 “계속”을 선택하면 해당 맥락을 다시 CB에 삽입.
    

---

## 📈 장점

- **인간 개입 없이** 맥락 회복 가능.
    
- “아까”의 모호한 범위를 AI가 알아서 유추.
    
- 세션 리부트·엔진 교체에도 동일하게 동작.