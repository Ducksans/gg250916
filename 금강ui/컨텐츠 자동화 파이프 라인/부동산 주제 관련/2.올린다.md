# 2) 올린다 — 퍼블리시/배포/캐노니컬 정책 및 SOP

작성시각: 2025-09-18 19:23 KST
작성자: Cascade

## 6하원칙 요약(퍼블리시)
- 누가(Who): 작성자→검수자→승인자→운영자(교차 검수 포함)
- 어디서(Where): 오리진 허브(CMS/Admin), CDN, 검색콘솔(GSC), 외부 채널(카카오/네이버/유튜브/블로그)
- 무엇을(What): Canonical 발급·슬러그 고정, JSON-LD/OG/oEmbed 메타 구성, Sitemap/robots 반영, 링크/메타 검증, ISR 리밸리데이트
- 어떻게(How): 본 문서의 SOP 5단계(초안→승인→게시→검증→리밸리데이트)와 `POST /api/revalidate`, 링크체커, 구조화데이터 테스트를 사용
- 왜(Why): 안전한 확산과 인덱싱 품질 확보, 법/저작권 준수, KPI(노출/CTR/전환/5분 응답) 향상
- 언제(When): 초안 완료 즉시 검수, 승인 직후 게시·검증, 변경 이벤트 발생 시 즉시 ISR, 사이트맵은 일/주 단위 갱신, 메타/링크 품질은 주간 점검

## 목표
- 1회 입력으로 오리진(허브)에 게시하고, ISR/캐싱·동적 사이트맵·oEmbed/OG 메타를 통해 다양한 채널에 안전하게 확산한다.
- Canonical First 원칙, 링크 무결성(UTM 규약), 인덱싱 가드(robots/sitemap) 일관 적용.

## 캐노니컬/UTM 규약
- Canonical URL: `https://hub.example.com/realestate/{region}/{category}/{slug}/`
- UTM 기본: `?utm_source={src}&utm_medium={mdm}&utm_campaign={cmp}&utm_content={cnt}`
  - src: kakao, naver, youtube, blog, partner
  - mdm: organic, cpc, social, referral, email
  - cmp: yyyyqN-topic or event code
  - cnt: placement-variant (e.g., thumbA-cta1)
- 단축 링크는 오리진 리디렉션을 경유: `go.example.com/{id}` → 302 → Canonical + UTM 부여

## 메타 데이터(SEO/SMO)
- JSON-LD: `RealEstateListing`, `BreadcrumbList`, `SearchAction` (사이트 전역), `VideoObject`/`ImageObject`(해당 시)
- Open Graph: `og:title`, `og:description`, `og:type`, `og:url`, `og:image`, `article:published_time`
- Twitter Card: `summary_large_image`
- oEmbed Provider: `GET /oembed?url={canonical}` → title, author_name, thumbnail_url, html(embed)

## 퍼블리시 SOP
1) 초안 생성 → 2) 검수/승인 → 3) 게시 → 4) 배포 검증(링크·메타) → 5) 리밸리데이트/인덱싱 확인
- 초안 생성
  - 필수 필드: 제목, 요약, 주소/좌표, PNU, 주요 이미지 1+, 카테고리/태그, 가격/면적 등 핵심 스키마
  - 증거 첨부: 원본 링크, 수집시각, 스크린샷/파일, 체크포인트 ID
- 검수/승인(하드게이트)
  - 국토부 2020-595 표시·광고 준수 체크리스트 통과
  - 사진/EXIF 민감정보 제거, 워터마크 적용(허브 제공)
  - 저작권·라이선스 표기 확인(출처·날짜·라이선스 종류)
- 게시
  - Canonical 발급, 슬러그 고정, OG/JSON-LD 렌더 확인
  - 이미지 최적화(WebP/AVIF), LQIP/placeholder 생성
- 배포 검증
  - 링크체커(200/30x/4xx/5xx), 메타 검증(OG/oEmbed), 구조화 데이터 테스트
  - 동적 Sitemap 반영(상세/이미지/비디오), robots 규칙 적용
- 리밸리데이트/인덱싱
  - ISR: `POST /api/revalidate { path: "/..." }`
  - Search Console URL 검사 트리거(수동/자동 큐)

## 동적 Sitemap/robots 정책
- `/sitemap.xml` 루트 인덱스 → 일/주/월 파트별, 유형별 분기(`sitemap-listings.xml`, `sitemap-areas.xml`, `sitemap-media.xml`)
- 이미지/비디오 포함: `<image:image>`, `<video:video>` 태그 병행
- robots.txt
  - Allow: HTML, JSON-LD, 이미지 썸네일
  - Disallow: `/api/*`, `/admin/*`, `/preview/*`, `/evidence/*`
  - Sitemap 지시자 포함

## 링크체커/품질 게이트
- 사전 검사: 200 응답, Canonical=현재 URL, 메타 필수 항목 존재
- 외부 링크 rel 정책: `noopener nofollow ugc`(UGC), `sponsored`(광고)
- 앵커 텍스트: 정보 목적 키워드 우선, 과도한 상업 키워드 회피

## ISR/캐싱
- 빌드 타임: Pillar/Cluster 템플릿 사전 생성
- 런타임: ISR(초기 60분), 변경 이벤트 시 `revalidate` 호출
- CDN 캐시: HTML 60m, 이미지 24h, JSON 30m(규정 변경은 예외 경보)

## 배포 체크리스트(요약)
- [ ] 필수 스키마 채움, 증거 첨부
- [ ] 하드게이트 통과(표시·광고/저작권/개인정보)
- [ ] Canonical/OG/JSON-LD 정상
- [ ] Sitemap/robots 반영
- [ ] 링크체커·구조화데이터 합격
- [ ] ISR/캐시 정책 설정 및 트리거
