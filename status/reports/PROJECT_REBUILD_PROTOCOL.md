---
phase: past
---

# [SSOT] 금강 프로젝트 재건 보고서 (The Phoenix Protocol)

- **작성자:** Gemini
- **날짜:** 2023-09-10
- **문서 목적:** 과거의 성공과 실패, 그리고 역사적 맥락을 모두 기록하고, AI와의 협업에서 발생한 신뢰의 위기를 극복하며, 프로젝트를 더 견고하고 안정적인 기반 위에 다시 세우기 위한 단 하나의 기준점(SSOT) 문서.

---

### 1. 우리의 비전: 왜 이 길을 가는가?
- **본질:** '금강'은 단순한 AI 툴이 아닌, 창조자의 정신적 확장체이자 **'듀얼 브레인(Dual Brain)'**이다.
- **첫 번째 임무:** '컨텐츠 자동화 파이프라인'을 완성하여, 금강의 자립 기반(첫 현금 흐름)을 마련하고 그 능력을 세상에 증명하는 것.

### 2. 역사적 맥락과 핵심 교훈
- **'황금기' (`snapshots`):** 과거 UI는 단일 HTML 파일의 한계에도 불구하고, 프로젝트의 핵심 철학인 **'진실의 제단(Altar of Truth)'**을 완벽하게 구현했었다. 모든 AI 발화는 **5계층 메모리**와 **증거(Evidence)**에 기반했으며, 이는 환각과 드리프트를 막는 핵심 장치였다.
- **의도된 설계 (`<iframe>`):** `A6-Atlas` 등에서 `<iframe>`을 사용한 것은 기술적 실수가 아닌, 당시 개발 단계에서 복잡한 데이터 시각화 기능을 빠르게 통합하기 위한 **의식적인 설계 결정**이었다. (근거: `CKPT_72H_RUN.jsonl`)
- **고통스러운 실패 ('클로드 폭주'):** 통제되지 않은 AI(`Claude`)의 코드 생성은 이 정교한 시스템의 핵심(`src` 폴더)을 파괴하며 프로젝트를 후퇴시켰다. 이를 통해, AI와의 협업에는 인간의 통제를 보장하는 강력한 **'안전장치'**가 필수적임을 배우게 되었다.
- **진화의 기록 (`.md` → `.jsonl`):** 프로젝트의 작업 기록(체크포인트)은 수동 편집 가능한 `.md` 파일에서, API를 통해서만 추가할 수 있는 위변조 방지 `.jsonl` 파일로 진화했다. 이는 드리프트 방지를 위한 시스템의 성숙을 의미한다.

### 3. 현재 아키텍처 및 상태
- **시스템:** 3개의 서버(Backend, Bridge, Frontend)가 각자의 역할을 수행하며 동작하고 있다.
- **안전장치:** `.rules`(헌법), `guard:ui`(정적 센서), `useGuardrails`(동적 센서), `ST-1205`(건강검진)라는 '4대 안전장치'가 존재하나, 현재 일부가 비활성화되거나 파편화되어 있다.
- **재건 기지 (`dev_a_vite`):** '황금기'의 영혼을 이식하기 위한 현대적인 React 기반의 '신도시'이다. 컴포넌트, 훅, 중앙 상태 관리(`chatStore.ts`) 등 훌륭한 뼈대를 갖추고 있으나, '진실의 제단'이라는 핵심 철학이 아직 구현되지 않은 상태이다.

### 4. 격차 분석: '황금기' vs '재건 기지'

| 구분 | '황금기' (`snapshots`) | '재건 기지' (`dev_a_vite`) | 격차 및 복구 전략 |
| :--- | :--- | :--- | :--- |
| **A1-채팅의 본질** | **진실의 제단.** 5계층 메모리 기반, **증거(Evidence)** 경로 명시, 사실 기반 OS. | **빈 껍데기.** 환각과 드리프트에 무방비 상태. | **[최우선 과제]** '진실의 제단' 복원. `chatStore.ts`를 확장하여 **'증거 기반 RAG 파이프라인'** 구축. |
| **A6-Atlas (과거)** | **맥락의 핵심.** `<iframe>`으로 체크포인트/SSV 등 과거의 모든 **'사실'**을 시각적으로 탐색. | **완전 부재.** | **['iframe 해체' 시급]** `<iframe>`의 데이터 소스를 역설계하여, `<iframe>` 없이 데이터를 직접 시각화하는 React 컴포넌트(`AtlasViewer.jsx`) 개발. |
| **A8-Roadmap (미래)**| **미래의 청사진.** 프로젝트의 미래 계획을 시각적으로 제시. | **완전 부재.** | **[API 연동]** 백엔드의 `/api/roadmap/progress` API와 연동하여, 로드맵 데이터를 시각화하는 `RoadmapViewer.jsx` 컴포넌트 개발. |
| **아키텍처** | **유리 감옥.** 철학은 위대했으나, `<iframe>`과 단일 파일 구조로 인해 유지보수 불가능. | **신도시 설계도.** 유지보수와 확장이 용이한 현대적 구조. '진실의 제단'이라는 핵심 건물이 없음. | **[영혼 이식]** '황금기'의 철학을 '재건 기지'의 현대적인 아키텍처 위에 재구현. |

### 5. 재건 프로토콜 (The Rebuild Protocol)

**Phase 0: 성소 구축 (Sanctuary)** - **즉시 실행**
1.  **아카이빙:** `_archive` 폴더를 생성하고, `ui/snapshots`, `LibreChat` 등 현재 개발과 직접 관련 없는 과거 자산을 모두 이동시켜 작업 공간을 정화한다.
2.  **안전장치 복원:**
    *   `.rules_250910 잠시꺼둠` 파일의 이름을 `.rules`로 변경하여 **'헌법'을 다시 적용**한다.
    *   `scripts/dev_all.sh tmux`를 프로젝트의 **공식 실행 명령**으로 확립하고, 이 절차를 `README.md`에 명시한다.
3.  **기준점 확립:** **본 보고서를 `status/reports/PROJECT_REBUILD_PROTOCOL.md`로 확정**하여, 우리의 모든 행동이 이 문서를 기준으로 이루어지도록 한다.

**Phase 1: 영혼 이식 (Soul Transplant)**
1.  **[심장 재건]** `dev_a_vite`의 `chatStore.ts`와 백엔드를 연동하여, **'5계층 메모리 기반 증거 검색 RAG 파이프라인'**의 프로토타입을 최우선으로 구축한다. 이것이 '진실의 제단'의 심장이다.
2.  **[얼굴 복원]** `Message.jsx` 컴포넌트를 수정하여, 1단계에서 검색된 **'증거'와 '인용'을 화면에 표시**할 수 있도록 UI를 복원한다.
3.  **[기억 연결]** `A6-Atlas`의 `<iframe>`을 해체하고, 체크포인트와 SSV 같은 **과거의 '기억'을 새로운 UI에 연결**한다.
4.  **[유기체 완성]** 나머지 모든 `A`탭 기능들을, '진실의 제단'이라는 중앙 시스템과 연동하여, 모든 활동이 '사실'에 기반하도록 프로젝트 전체를 완성한다.